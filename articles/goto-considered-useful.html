<p><head><style>
    body        { background: #fff; margin-left:  40px;   font-size:  0.9em;  font-family: sans-serif; max-width: 800px; }
    h1          { background: #ffb; margin-left: -30px;   border-bottom: 5px  solid #ccc; }
    h2, h3      { background: #ffb; margin-left: -30px;   border-top:    3px  solid #ddd; }
    h4, h5      { background: #ffb; margin-left: -20px; }
    code        { font-size:    1.1em;  background:  #ddf; }
    pre         { margin-left:  2em;    background:  #ddf; }
    pre code    { font-size:    1.1em;  background:  #ddf; }
</style></head></p>

<h1><a name="_GOTO_considered_useful_"><code>GOTO</code> considered useful!!</a></h1>

<p><sup>(Far be it from me to go head to head against
<a href="http://www.acm.org/classics/oct95/">Prof. Dijkstra</a> but when I sent this to
Stijn (who maintains <a href="http://micans.org/apparix/">apparix</a>), he came up with
this very cute title, which I promptly stole!)</sup></p>

<p>Despite the title, this is nothing to do with programming, structured or
otherwise :-)</p>

<p>This is all about supplementing the lowly <code>cd</code> command with some extra punch
for those of us who spend a lot of time at the Linux command line working with
files in various directories.  Even with <em>bash completion</em>, typing out long
directory paths is a chore that kills productivity.</p>

<hr />

<p><sup>This document has the following sections:</p>

<p>&nbsp;&nbsp;&nbsp;&nbsp;<a href="#_GOTO_considered_useful_"><code>GOTO</code> considered useful!!</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#First_a_word_about_apparix_">First, a word about <code>apparix</code></a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#What_is_goto_and_where_do_I_get_it_">What is <code>goto</code> and where do I get it?</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Features_and_uses">Features and uses</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Dependencies_Caveats">Dependencies/Caveats</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Usage_messages">Usage messages</a><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Examples">Examples</a><br>
</sup></p>

<h3><a name="First_a_word_about_apparix_">First, a word about <code>apparix</code></a></h3>

<p>Like in almost all things in this world, the
<a href="http://en.wikipedia.org/wiki/Pareto_principle">80-20 rule</a> applies.  For the
20% of directories in which you spend 80% of your time, use the
afore-mentioned <a href="http://micans.org/apparix/">apparix</a>.  For those cases,
there's no substitute for the speed with which apparix works, the ability to
set short names as bookmarks and to just say</p>

<pre><code>to wh
</code></pre>

<p>instead of</p>

<pre><code>cd /var/www/homepages/sitaram
</code></pre>

<p>The fact that setting bookmarks is just as easy also helps:</p>

<pre><code>cd /home/sitaram/workdata/mindmaps
bm mm
</code></pre>

<p><code>bm</code> and <code>to</code> are bash aliases that come with apparix.  <code>bm</code> stands
for <em>bookmark</em>.</p>

<h3><a name="What_is_goto_and_where_do_I_get_it_">What is <code>goto</code> and where do I get it?</a></h3>

<p>For the other 80% directories where you spend 20% of the time, (and very
cleverly, this can also be construed to mean "directories on other machines
where you don't spend much time or you don't want to install <em>apparix</em>"!),
use <code>goto</code>.</p>

<p>Get it from <a href="bashrc.goto">here</a> and include it in your normal <code>.bashrc</code></p>

<p>You get three bash functions: <code>goto</code>, <code>fgoto</code>, and <code>goto_range</code>.
All of them will respond with a nice usage message if you give <code>-h</code> as the
argument.  Note that <code>fgoto</code> is really <code>goto</code> in disguise, but the
argument is considered to be a file name pattern rather than a directory name
pattern.</p>

<h3><a name="Features_and_uses">Features and uses</a></h3>

<h5>"Bang for the buck"</h5>

<p><code>goto</code> allows you to get some pretty major productivity gains very
quickly, without having to install any software.</p>

<h5>Exploring the file system made easy</h5>

<p><code>goto</code> and <code>fgoto</code> make it easy to explore the filesystem looking for
stuff whose location you only vaguely remember or guess.</p>

<p>Also, <code>fgoto</code>'s ability to jump into a directory based on giving a
<strong>filename</strong> (as opposed to a <strong>directory name</strong>) is unique.  [If you know of
other tools which do this, please let me know and I will be happy to
acknowledge them; I haven't heard of any so far.]</p>

<p>When you know a good part of the file name, but are not sure where it lives,
try fgoto.  You'll be surprised!</p>

<h5>Quickly set a range for the searches</h5>

<p>Sometimes "goto" returns results from directories you don't care about, and
you want to restrict the searches to a set of directories only.  And sometimes
it's the opposite -- you want the results coming from anywhere <em>except</em> a
certain set of directories.</p>

<p>Use the <code>goto_range</code> command for all this.  The <code>-h</code> option shows you
a pretty good help message.</p>

<p>This can be very useful sometimes.  Ever inherited a whole bunch of files from
someone else?  Or downloaded a large-ish source tree with many directories and
wanted to quickly jump around <strong>just within</strong> that, looking for files and
directories?</p>

<h5>Even more quickly set a <em>temporary</em> range</h5>

<p>Use <code>goto . some_dir_pattern</code> or <code>fgoto . some_file_pattern</code> to
temporarily set the search range to the current directory before doing the
goto/fgoto.  When invoked this way, the current search range and all related
settings are ignored.</p>

<p>In place of <code>.</code> (dot) above, you can use <code>..</code>, <code>~</code>, or indeed any
valid directory name, and you'll get matches only within that directory.</p>

<h3><a name="Dependencies_Caveats">Dependencies/Caveats</a></h3>

<ul>
<li><p>All this is from a Linux perspective.  It <em>may</em> work on other Unixes
also, but my DG-UX, HP-UX, AIX, DEC Ultrix, Solaris, days are long gone.
If your Unix has something like Linux's <em>locate database</em>, and bash, it
should work with a small change here and there.  The <em>korn shell</em> I knew
ten years ago certainly would not have been able to do this, but I know
<em>ksh</em> has changed a lot, so maybe that'll work too.  I wouldn't know.</p></li>
<li><p>I assume your locate database is uptodate.  If your Linux is reasonably
recent and it runs continuously, the system cron is probably running
<code>updatedb</code> nightly, so you're OK.  Otherwise you may have to run it
manually once in a while.</p></li>
<li><p>If you don't have a locate db at all, and you choose a range limited
search, <code>goto</code> and friends will happily use <code>find</code>.  When the
directory in your range limit is not huge, this is often fast enough.</p></li>
<li><p>If you don't use <em>bash</em>, sorry.  Translations to <em>zsh</em>, <em>tcsh</em> etc.,
are welcome.</p></li>
</ul>

<h3><a name="Usage_messages">Usage messages</a></h3>

<p>If you're curious, here're examples of the usage messages of the two functions
<code>goto</code> and <code>goto_range</code>.</p>

<p><strong>goto</strong></p>

<pre><code>[sitaram@home ~]$ goto -h
Usage: goto dir_pattern
       fgoto file_pattern

Uses the locate database to find a directory (i) matching the dir_pattern OR
(ii) containing a file matching the file_pattern

The patterns use locate's "-r" option, except that we're only interested in
matching the last component of each candidate path.

argument        matches what part of last path component?
------------    -----------------------------------------
path            anywhere
/path           starts with
path$           ends with
/path$          exact

IMPORTANT: You can restrict the search to one or more directories.  Run
"goto_range -h" to learn how to use the search range effectively.

SHORTCUT: "goto . pattern" or "fgoto . pattern" TEMPORARILY sets the search
range to the current directory and then does the goto/fgoto, REGARDLESS of
what the current range settings are!  You can do this with any directory
instead of "." -- I usually do this to ".", "..", "~", "/var" etc., as needed.
</code></pre>

<p><strong>goto_range</strong></p>

<pre><code>[sitaram@home ~]$ goto_range -h
Usage: goto_range s|a|l|u|e|i

Sometimes "goto" returns results from directories you don't care about, and
you want to restrict the searches to a set of directories only

  s = SET the current directory as the search range
  a = ADD the current directory to the search range

  l = LIMIT searches to the search range
      the search range is set to the current directory if it is undefined
      using the "s" or the "a" option automatically sets this also
  u = UNlimited; use the entire locate database
      the search range is not used even if it is defined
      this is the default behaviour

Sometimes you want to say "search everywhere except in these directories"

  e = EXCLUDE directories; search everywhere EXCEPT in search range
  i = INCLUDE directories; search only in search range
      this is the default behaviour
</code></pre>

<h3><a name="Examples">Examples</a></h3>

<p>Here's how a few typical interactions might look like:</p>

<pre><code>[sitaram@home ~]$ goto 6-misc-set2
/home/sitaram/save/pictures/mine/2006-misc-set2

[sitaram@home ~]$ fgoto img_2178
/home/sitaram/save/pictures/mine/2006-misc-set2

[sitaram@home ~]$ fgoto img_1878
 1) /home/sitaram/save/pictures/mine/2005-friends
 2) /home/sitaram/save/pictures/mine/2005-ganesh
#? 2
/home/sitaram/save/pictures/mine/2005-ganesh
</code></pre>

<p>Here's an example where it found multiple matches:</p>

<pre><code>[sitaram@home ~]$ goto misc-set
1) /home/sitaram/save/pictures/mine/2006-misc-set1  5) /home/sitaram/save/pictures/mine/2005-misc-set2
2) /home/sitaram/save/pictures/mine/2006-misc-set2  6) /home/sitaram/save/pictures/mine/2005-misc-set3
3) /home/sitaram/save/pictures/mine/2006-misc-set3  7) /home/sitaram/save/pictures/mine/2005-misc-set4
4) /home/sitaram/save/pictures/mine/2005-misc-set1
#? 3
/home/sitaram/save/pictures/mine/2006-misc-set3
[sitaram@home 2006-misc-set3]$
</code></pre>

<p>Here's another example where it found multiple matches:</p>

<pre><code>[sitaram@home ~]$ goto security
 1) /home/sitaram/imli/files-pers/blog/blosxom-stuff/blosxom/software/security
 2) /home/sitaram/.local/share/applications/Mandrakelinux/System/Configuration/KDE/Security
 3) /etc/security
 4) /var/lib/menu-xdg/applications/Mandrakelinux/System/Configuration/KDE/Security
 5) /var/lib/menu-xdg/simplified/applications/Mandrakelinux/AdministerYourSystem/UseMoreAdministrationTools/Configuration/KDE/Security
 6) /var/log/security
 7) /usr/share/doc/HOWTO/HTML/en/Security
 8) /usr/share/doc/HOWTO/HTML/en/Security-Quickstart
 9) /usr/share/doc/HOWTO/HTML/en/Security-Quickstart-Redhat
10) /usr/share/ri/1.8/system/SecurityError
11) /usr/lib/libDrakX/security
12) /usr/lib/nvu-1.0/chrome/en-US/locale/global/security
#? ^C
</code></pre>

<p>Oops -- too many matches, and from too many different places.  I want to
restrict the match to just the home directory.  The long way is to use the
<code>goto_range</code> command to set a range and then use the goto.  The quick way
is to just add a valid directory name (in this case just <code>~</code>) as the first
argument.</p>

<pre><code>[sitaram@home ~]$ goto ~ security
range status: goto is currently limited
the range is defined to be
        ^/home/sitaram
run "goto_range -h" for usage

search range:   ^/home/sitaram
1) /home/sitaram/imli/files-pers/blog/blosxom-stuff/blosxom/software/security
2) /home/sitaram/.local/share/applications/Mandrakelinux/System/Configuration/KDE/Security
#? 1
/home/sitaram/imli/files-pers/blog/blosxom-stuff/blosxom/software/security
[sitaram@home security]$
</code></pre>

<p>Remember: any valid directory is good for this trick, so the most common
examples are things like are <code>.</code>, <code>..</code>, <code>/etc</code>, <code>/var/www</code>,
etc.</p>
